<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<template id="invoice_report_utd_document">
		<t t-call="web.html_container">
			<t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)" />
			<t t-set="forced_vat" t-value="doc.fiscal_position_id.foreign_vat"/>
			<!-- So that it appears in the footer of the report instead of the company VAT if it's set -->
			<!-- Multicompany -->
			<t t-if="doc and 'company_id' in doc">
				<t t-set="company" t-value="doc.company_id"></t>
			</t>
			<t t-if="not doc or not 'company_id' in doc">
				<t t-set="company" t-value="res_company"></t>
			</t>
			<t t-set="context" t-value="doc._context"></t>
			<t t-set="partner" t-value="doc.partner_id"/>
			<t t-if="doc.partner_id.parent_id and doc.partner_id.parent_id.name">
				<t t-set="partner" t-value="doc.partner_id.parent_id"/>
			</t>
			<t t-set="partner_shipping" t-value="doc.partner_id"/>
			<t t-if="doc.partner_shipping_id and doc.partner_shipping_id.name">
				<t t-set="partner_shipping" t-value="doc.partner_shipping_id"/>
			</t>
			<t t-if="doc.partner_shipping_id.parent_id and doc.partner_shipping_id.parent_id.name">
				<t t-set="partner_shipping"
				   t-value="doc.partner_shipping_id.parent_id"/>
			</t>
			<div class="page" style="font-size: 8pt;">
				<t t-call="l10n_ru_utd.header_template"/>
				<div style="height: 20px;">
					<table style="width: 100%; height: 20px;">
						<colgroup>
							<col width="8%"/>
							<col width="92%"/>
						</colgroup>
						<tr>
							<td style="border-right: 4px solid black;"></td>
							<td></td>
						</tr>
					</table>
				</div>
				<t t-call="l10n_ru_utd.top_template"/>
				<div style="height: 20px;">
					<table style="width: 100%; height: 20px;">
						<colgroup>
							<col width="8%"/>
							<col width="92%"/>
						</colgroup>
						<tr>
							<td style="border-right: 4px solid black;"></td>
							<td></td>
						</tr>
					</table>
				</div>
				<t t-call="l10n_ru_utd.products_table"/>
				<t t-call="l10n_ru_utd.under_product_table"/>
				<t t-call="l10n_ru_utd.upper_footer"/>
				<t t-call="l10n_ru_utd.bottom_footer"/>
				<div class="text-center"
					 style="border-top: 1px solid black;font-family: Arial; font-size: 8pt; font-style: normal;">
					Документ составлен на
					<span class="topage"/>
					листе (листах)
				</div>
			</div>
		</t>
	</template>

	<template id="invoice_report_utd_raw">
		<t t-call="web.html_container">
			<t t-foreach="docs" t-as="doc">
				<t t-call="l10n_ru_utd.invoice_report_utd_document" t-lang="doc.partner_id.lang"/></t>
		</t>
	</template>

	<template id="invoice_report_utd">
		<t t-call="l10n_ru_utd.invoice_report_utd_raw"/>
	</template>

	<template id="report_saleorder_pro_forma">
		<t t-call="web.html_container">
			<t t-set="is_pro_forma" t-value="True"/>
			<t t-set="docs" t-value="docs.with_context(proforma=True)"/>
			<t t-foreach="docs" t-as="doc">
				<t t-call="sale.report_saleorder_document" t-lang="doc.partner_id.lang"/></t>
		</t>
	</template>

	<!-- Allow edits (e.g. studio) without changing the often inherited base template -->
	<template id="document_tax_totals" inherit_id="account.document_tax_totals_template" primary="True"></template>
</odoo>
