<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<!-- Templates for report with stamp -->
	<template id="document_signatures_with_stamp">
		<style type="text/css">
			tr.R15 { height: 17px; }
			tr.R15 td.R51C10 { text-align: right; border-bottom: #000000 1px
			solid; }
			tr.R15 td.R51C6, tr.R15 td.R51C6I, tr.R15 td.R51C6S { border-bottom:
			#000000 1px solid; }
			tr.R15 td.R51C6I, tr.R15 td.R51C6S { overflow: visible; }
			tr.R15 td.R51C6I span, tr.R15 td.R51C6S span { position: relative; }
			tr.R15 td.R51C6I span img { position: absolute; width: 100px; top:
			-30px; }
			tr.R15 td.R51C6S span img { position: absolute; width: 140px; top:
			10px; left: -60px; }
			tr.R15 td.R51C1 { font-family: Arial; font-size: 9pt; font-style:
			normal; font-weight: bold; }
		</style>
		<table style="width: 100%;">
			<tr class="R15">
				<td class="R51C1" style="width: 120px;">
					<span>Руководитель</span>
				</td>
				<td class="R51C6I">
					<span>
						<t t-if="company.print_facsimile and (company.print_anywhere or context.get('mark_so_as_sent', False)) and company.chief_id.facsimile">
							<img t-att-src="'data:image/png;base64,' + company.chief_id.facsimile.decode('utf-8')"/>
						</t>
						<t t-else="">
							<t t-raw="''"/>
						</t>
					</span>
				</td>
				<td class="R51C6S">
					<span>
						<t t-if="company.print_stamp and (company.print_anywhere or context.get('mark_so_as_sent', False)) and company.stamp">
							<img t-att-src="'data:image/png;base64,' + company.stamp.decode('utf-8')"/>
						</t>
						<t t-else="">
							<t t-raw="''"/>
						</t>
					</span>
				</td>
				<td class="R51C10" COLSPAN="6">
					<t t-esc="company.chief_id.get_initilals_for_report()"/>
				</td>
				<td style="width: 10%;"></td>
				<t t-if="not company.is_ip and not company.is_self_employed">
					<td class="R51C1" style="width: 100px;">
						<span>Бухгалтер</span>
					</td>
					<td class="R51C6I">
						<span>
							<t t-if="company.print_facsimile and (company.print_anywhere or context.get('mark_so_as_sent', False)) and company.accountant_id.facsimile">
								<img t-att-src="'data:image/png;base64,' + company.accountant_id.facsimile.decode('utf-8')"/>
							</t>
							<t t-else="">
								<t t-raw="''"/>
							</t>
						</span>
					</td>
					<td class="R51C10">
						<t t-esc="company.accountant_id.get_initilals_for_report()"/>
					</td>
				</t>
			</tr>
		</table>
	</template>

	<!-- Templates for report without stamp -->
	<template id="document_signatures_without_stamp">
		<style type="text/css">
			tr.R15 { height: 17px; }
			tr.R15 td.R51C10 { text-align: right; border-bottom: #000000 1px
			solid; }
			tr.R15 td.R51C6, tr.R15 td.R51C6I, tr.R15 td.R51C6S { border-bottom:
			#000000 1px solid; }
			tr.R15 td.R51C6I, tr.R15 td.R51C6S { overflow: visible; }
			tr.R15 td.R51C6I span, tr.R15 td.R51C6S span { position: relative; }
			tr.R15 td.R51C6I span img { position: absolute; width: 100px; top:
			-30px; }
			tr.R15 td.R51C6S span img { position: absolute; width: 140px; top:
			10px; left: -60px; }
			tr.R15 td.R51C1 { font-family: Arial; font-size: 9pt; font-style:
			normal; font-weight: bold; }
		</style>
		<table style="width: 100%;">
			<tr class="R15">
				<td class="R51C1" style="width: 120px;">
					<span>Руководитель</span>
				</td>
				<td class="R51C10" COLSPAN="6">
					<t t-esc="company.chief_id.get_initilals_for_report()"/>
				</td>
				<td style="width: 10%;"></td>
				<t t-if="not company.is_ip and not company.is_self_employed">
					<td class="R51C1" style="width: 100px;">
						<span>Бухгалтер</span>
					</td>
					<td class="R51C10">
						<t t-esc="company.accountant_id.get_initilals_for_report()"/>
					</td>
				</t>
			</tr>
		</table>
	</template>

	<!-- Templates for both reports with and without stamp -->
	<template id="document_products_table">
		<table class="table" style="border-collapse: collapse; width: 100%; table-layout: fixed;">
			<!-- In case we want to repeat the header, remove "display: table-row-group" -->
			<thead>
				<tr style="">
					<th style="width: 5%">№</th>
					<th style="width: 45%">Товары (работы, услуги)</th>
					<th style="width: 10%">Кол-во</th>
					<th style="width: 10%">Ед.</th>
					<th style="width: 10%">Цена</th>
					<th style="width: 10%">Сумма</th>
				</tr>
			</thead>
			<tbody>
				<t t-set="current_subtotal" t-value="0"/>
				<t t-foreach="lines_to_report" t-as="line">
					<tr>
						<td style="width: 5%">
							<span>
								<t t-esc="line_index + 1"/>
							</span>
						</td>
						<td style="width: 45%">
							<span t-esc="line.name"/>
						</td>
						<td style="width: 10%">
							<span>
								<t t-esc="line.product_uom_qty or ''"/>
							</span>
						</td>
						<td style="width: 10%">
							<span>
								<t t-esc="line.product_uom.name or ''"/>
							</span>
						</td>
						<td style="width: 10%">
							<span>
								<t t-esc="line.price_unit or ''"/>
							</span>
						</td>
						<td style="width: 10%">
							<span>
								<t t-esc="(('%.2f')%(line.price_unit*line.product_uom_qty)).replace('.',',') or ''"/>
							</span>
						</td>
					</tr>
				</t>
			</tbody>
		</table>
		<div class="clearfix" name="so_total_summary">
			<div id="total" class="row" name="total">
				<div t-attf-class="#{'col-6' if report_type != 'html' else 'col-sm-7 col-md-6'} ms-auto">
					<table class="table table-sm table-borderless">
						<tbody>
							<tr style="font-weight: bold;">
								<td>
									<span>Итого:</span>
								</td>
								<td>
									<span>
										<t t-esc="doc.amount_total or '0,00'"/>
									</span>
								</td>
							</tr>
							<t t-set="tax_totals" t-value="doc.tax_totals"/>
							<t t-call="l10n_ru_schet.document_tax_totals_template_schet"/>
							<tr style="font-weight: bold;">
								<td>
									<span>Всего к оплате:</span>
								</td>
								<td>
									<span>
										<t t-esc="doc.amount_total or '0,00'"/>
									</span>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</template>

	<template id="document_header_table">
		<table style="width: 100%; border: 1px solid black; height: 200px;" class="table table-sm o_main_table mt-4">
			<colgroup>
				<col style="width: 30%; border: 0px solid black;"/>
				<col style="width: 30%; border-right: 1px solid black;"/>
				<col style="width: 10%;"/>
				<col style="width: 30%;"/>
			</colgroup>
			<tr>
				<td colspan="2" rowspan="2" style="width: 30%; vertical-align: top; border-width: 0;">
					<t t-esc="(company.bank_id and company.bank_id.bank_name or '')+' '+(company.bank_id and company.bank_id.bank_id.city or '')"/>
				</td>
				<td style="width: 10%; border: 1px solid black; text-align: center;">БИК</td>
				<td style="width: 30%; border-bottom: 0px solid black;">
					<t t-esc="company.bank_id and company.bank_id.bank_bic or ''"/>
				</td>
			</tr>
			<tr>
				<td rowspan="2" style="width: 10%; text-align: center; border-right: 1px solid black;">
					<span>Сч. №</span>
				</td>
				<td rowspan="2" style="width: 30%; border-bottom: 0px solid black;">
					<t t-esc="company.bank_id and company.bank_id.bank_id.corr_acc or ''"/>
				</td>
			</tr>
			<tr>
				<td colspan="2" style="width: 30%; vertical-align: bottom; border-width: 0;">Банк получателя</td>
			</tr>
			<tr>
				<td style="width: 30%; border: 1px solid black;">
					<span style="word-spacing: 50px;">
                                ИНН

						<t t-esc="company.inn or ''"/>
					</span>
				</td>
				<td style="width: 30%; border: 1px solid black;">
					<span style="word-spacing: 50px;">
                                КПП

						<t t-esc="company.kpp or ''"/>
					</span>
				</td>
				<td style="width: 10%; text-align: center; border-right: 1px solid black; border-top: 1px solid black; border-bottom: 0px solid black;">
					<span>Сч. №</span>
				</td>
				<td style="width: 30%; border-top: 1px solid black; border-bottom: 0px solid black;">
					<t t-esc="company.bank_id and company.bank_id.acc_number or ''"/>
				</td>
			</tr>
			<tr height="20px">
				<td colspan="2" style="width: 30%; vertical-align: top; border-bottom: 0px solid black; vertical-align: top;">
					<t t-esc="company.name or ''"/>
				</td>
				<td style="width: 10%; border-right: 1px solid black; border-bottom: 0px solid black;"></td>
				<td style="width: 30%; border-bottom: 0px solid black;"></td>
			</tr>
			<tr>
				<td style="width: 30%; border-bottom: 0px solid black; vertical-align: bottom;">
					<span>Получатель</span>
				</td>
				<td style="width: 30%; border-right: 1px solid black; border-bottom: 0px solid black;"></td>
				<td style="width: 10%; border-right: 1px solid black; border-bottom: 0px solid black;"></td>
				<td style="width: 30%; border-bottom: 0px solid black;"></td>
			</tr>
		</table>
	</template>

	<template id="document_tax_totals_template_schet">
		<t t-if="tax_totals['subtotals']">
			<t t-foreach="tax_totals['subtotals']"
			   t-as="subtotal">
				<t t-set="group_name"
				   t-value="subtotal['name']"/>
				<t t-foreach="tax_totals['groups_by_subtotal'][group_name]"
				   t-as="tax">
					<tr style="font-weight: bold;">
						<td>
							<t t-esc="'В том числе ' + tax['tax_group_name'] + ':'"/>
						</td>
						<td>
							<t t-esc="tax['formatted_tax_group_amount']"/>
						</td>
					</tr>
				</t>
			</t>
		</t>
		<t t-else="">
			<tr style="font-weight: bold;">
				<td>
					<t t-esc="'Без налога (НДС):'"/>
				</td>
				<td>
					<t t-esc="'-'"/>
				</td>
			</tr>
		</t>
	</template>
</odoo>